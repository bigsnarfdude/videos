Thank you. Thank you for organizing the workshop. It has been a lot of fun so far. Hoping it will be a lot of fun for the remaining few days. This is joint work with Josh. And it's very preliminary work. We started working on this a couple of months ago and when we decided what to do said, we decided. So we have some cool things that we think are cool things to say, even though. We think are good things to say, even though they are preliminary. So, very much looking forward to hearing your thoughts. So, the motivation: we have been talking a lot about matching markets. In general, when you think about matching markets or the literature in general, there are like two views. One is the market view, where we have populations and preferences and some type of mechanism or process, and that gives us an outcome. And that's typically considered sometimes like incentives or more. Like incentives or more decentralized things, and so on. So far, most of us have been talking about an optimization view where we have some populations, we have some costs associated with matching to members of these populations, we have an objective and we optimize upon the objective and we get some confidence. So, part of how we started to think about this is if you look at the empirical literature on matching markets, they typically take the market view, and what they would The market view, and what they want to do is to try to recover the preferences from the observed match data. However, that typically imposes very strong assumptions on how these matches are generated. So if either, you know, many papers assume that the mechanism is known, like in spool choice or in kidney exchange, whatnot, or they assume that the outcome is at some sort of equilibrium and Some sort of equilibrium, and the most used notion of this equilibrium is pairwise stability. And that happens, for example, in merge market papers or labor merger papers. What we found a bit like, you know, intriguing is that in many cases, even if the matched data is available, the mechanism is not known by which this data was generated. And this can be by a variety of reasons. In the optimization view, you may not know the algorithm. The algorithm, proprietary, or even in the market view, you may not really know the process, you may really not know what the rationality assumptions on the agents and so on. So, what we are going to do is we are going to take the optimization given and we are going to ask if the observed match data can tell us something about the objective. Okay? And then we are going to try to understand: well, We are going to try to understand: well, what are some footprints that we can expect to see in these matching outcomes? And how can this be applied to a more market view? So let me give you a concrete example how we started to think about this. This is just to illustrate. We are going to use this data set that is often used in empirical matching marriage markets. Again, it's just an illustration. So here we have this survey that gives you salary. Survey that gives you salary data of matched couples, of men and women couples in California in the 2019 survey. So here we have the men's salary, here we have the women's salary in these part couples. And what you can see from this picture is this sort of bifurcation-like behavior. So what does that mean? There's a significant mass of much people in the diagonal, but then for salaries with men that are roughly 45. With men that are roughly 45k, you can see that they're also matched to some lower salary. Okay? Then when we saw this, we were like, okay, what is this? Why is this happening? So we kind of asked, how can bifurcations arise? And is this really a one off? Is it really caused by the data? Is it really caused by the no by the noise? Or is it like a common phenomenon that we would expect in matching markets? In my two markets. Good. Questions so far? Sorry if I'm really, really dumb, but can you explain just what the bifurcation means here? Like, you're on the diagonal. There's a lot of mass on the diagonal, and then... At some point in the diagonal, you have this curve that goes to... I see. And just to be clear what to expect, I try to keep it informal just to not introduce a lot of definitions, but please ask me. So, what we're going to do is we're going to provide a framework to understand why these deformations arise in matching markets in the line. We are going to use optimal transport theory for that. Then, we are going to see that matching under any concave utility will lead to these five cents. But also, that hopefully I show you that matching under concave utilities can capture a lot of problems. We are going to identify a sharp phase transition. Identify sharp phase transitions where there are no bifurcations, and then after this phase transition, you have at least one, or typically at least two. And the number of bifurcations depends on the population imbalances across the two sites. And then we can discuss some potential implications, and hopefully, you all can tell us what are other potential implications. In the data back, there is a sort of tax implication at forty thousand pound dollars. I don't know. I mean, totally. That's kind of the. I am not sure what are the tax implications in the state of California at 45,000. I'm not sure if these couples are filing jointly or separately. So I have no clue. I'm very ashamed to admit that my husband doesn't taxes. So yeah. Okay, good. So let me start by introducing the model. This is just the By introducing the model, this is just the regular optimal transport model in the line. So we are going to have two sides of the market, x and y. Each side is going to be described by a non-atomic and non-negative measure in R. It has finite total mass. And just we are going to assume that the measures basically that both sides have the second totalness. Okay? Then we're going to assume that the matching is going to be To assume that the matching is going to be formed by solving the following transport problem. So we are going to minimize some cost functions. So this is the cost of matching x to y. And we are going to assume that that is going to be a function of the distance between x and y in the line. I don't think this is going to be our example, it's just the distance to some power p rhythm. Greater than C. And our decision variable is gamma. This is going to be the transport. And it's going to be just a feasible non-negative measure that tells us basically how to match measure of x to some part of mu. And then the set of feasible measures are those that have mu and mu for margins. Okay, so basically you cannot match. So, basically, you cannot match more people of a type than people that you have. Does that make sense? Yes? Typical optimal transport problem. So, what we are going to do next is this paper extensively studies the geometry of the support of this problem, and we are going to leverage these results to study the systems of the implications in matching creations. So, let's start with what happens if the costs are okay. Are okay. Sorry, just a clever bit. I thought the matching market is decentralized, but this is slightly centralized. Yes, so we're now going to take the optimization view. There's somebody optimizing this matching market and generating matches using some cost function that we for now assume that it's unknown. And then I'm going to show you how it relates to the market view. So, some decentralized matching markets can be customized. Any other questions? Any other questions? Your cost doesn't depend on where X and Y are located, just the difference? It's the distance between X and Y. Yeah. Correct, and it doesn't depend on the sum or like... So for now, we're just going to assume that it depends on the distance. Some of these results extend to other things, but let me just keep it the distance. Especially the replication ones extend some of them, but let's just keep the distance. Okay, so let's see the case of convex costs. So it says that if we have C that's strictly convex in the line, then for any optimal measure we must have that the support must be non-decreasing. And moreover, if the two given measures have the same mass, then there's a unique solution. So let me say this in regular terms. What does that mean? If our optimal measurement has non-increasing support, that means that the optimal match. That means that the optimal matching is going to be the assortative matching. Basically, the best person is matching the best person, the second best person is matching the second best person, and so on. And if a unique such joint measure exists, this part basically is going to say that this solution, the assortment, is going to be the unique solution for any convex object. All convex objectives we have existed. All convex objectives we have exactly the same solution and it's the esoteric matching. So let me show you the esoteric matching in a picture. So here we have our measure mu of one side of the population. Here I have my other side of the population, mu, and I draw it on the flip side so you can see it. So what does assertative matching mean? Assertative matching means best people are going to be matched somewhere here. Second best people are going to be matching. Second best people are going to be much smaller there, and so on. Does that make sense? You're clear? Good. Okay, so that's the case of convex. Everything is solved, and actually the solution is cost independent. Let's look at the case of concaves. So for the case of concaves, what we're going to see is that they're going to satisfy what is called a no-crossing property. So imagine we are given two points in the real line, x and y. Points in the real line, x and y, and then we are going to define O of x and y as the smallest circle in the plane that crosses at both x and y. Okay, so what does that mean? We have x, we have y, we have a circle that has x and y. So, this is the theorem that for continuous and strictly concave costs, the optimum Cape costs, the optimal measure satisfy the strict no-crossing property, which means that if both x and y and x and y prime are in the support of my optimal measure, then we have that these circles, the circle given by x and y and the circle given by x prime and y prime, do not intersect unless x equals x prime or y equals y prime. So let me show you in a picture what this means. Smooth. If we look at our previous matching, remember we had with convex costs, we had these ones, these two pairs were matched. Here we cannot have that because now these two circles will intersect each other. Does that make sense? This will cross. So we cannot have two circles. So what are the implications of this? Should it be circle or is it? It's circle, but I draw a semicircle. And you can understand that if the semicircle is. But does it the theorem does it need to be circle or does it actually be a family of curves to give you the single? I think the single theorem is written with the circle. Of course, it's you know, I'm guessing you can do any family of cards with a semicircle, but yes. That makes sense? So it's not crossing clear what this means. So what are the implications? The first implication is that if your measures have any mass that is common, then that means that these people need to be matched together, okay? People need to be matched together. So, any mass that is common to both populations will be concentrated in the diagonal of myoptimal match. And the second one is that we can then think of myoptimal match as the union of the diagonal match and a residual match. Okay, so what we're going to do next is to understand how that residual match looks like. Okay, so to understand the structure of the residual match, Okay, so to understand the structure of the resilient match, what first we are going to do is to define the sign measure, which is just the difference between these two measures. So this is my sign measure. And then if this measure, we are just going to assume it changes signs a finite number of times. So that means that the measure will alternate between some intervals of demand and some intervals of supply. Okay? So we have this sort of alternating pattern in ourselves. This sort of alternating pattern in our time measure. And then that means that the full mass of my residual match needs to be in these rectangles, which are basically the rectangles that you obtain when you have one supply interman and one demand interman. Does that make sense? So physically, this rectangle will correspond to matching people from here. Okay, so how then does the residual match look like? So we have that every optimal match will be a combination of myak diagonal match, that is a sort of pin. Two things, jumps and bifurcations. So bifurcations, I'll get to biocolum bifurcation soon, are going to be local matches, which are going to be supported in adjacent intervals. So intervals, the rectangles in red jumps. Red. Jumps are going to be long-distance matches that are going to be supported in these non-adjacent views. The orange rectangle. And within these rectangles, what we've had is that if they're non-empty, they're going to be decreasing, so anti-assortative. And if they're, for the bifurcations, if it's not empty, it needs to start at xx. So I cannot have something that is in the middle of my. Something that is in the middle of my rectangle definitely needs to start here. That makes sense? And what you can see is that bifurcations are always existing at this point for strictly concave costs. And jumps may or may not exist. Most likely than not, they will exist, but sometimes they don't exist. Okay? So let me show you with an example. So here I have my sign measure. So here I have my sign measure, here is my cost, so the square root of the distance. And to find what's the optimal match, the only thing, and please believe me, in the sake of time, you need to find how much I'm going to send here, how much I'm going to send to the other place, and then no crossing will determine how these things get out. Okay, so this is how my optimal match will look like. And here you can see the support of my optimal match. You can see that You can see that all of these three local matches, specifications have gone empty. They all start at the diagonal, and then you can see our jumps right there. Is it always in straight lines? It's not. It's just straight line because you can see that my measures are just unit measures. In general, it will be a curve. Any questions? Okay, so let me just do a quick recap. Our quick recap on what's coming next. So, what have we learned so far? For convex, we always get the asyrtotic matching. For concave, we not only get the same result, but it does have this geometric shape always, which is a diagonal plus multiplications, plus jumps. So this suggests there is some sort of sharp phase transition when you go from convex to locate, right? So, we are trying to do that a bit more formal. We are just going to consider a parametric family. Just going to consider a parametrized family of functions where basically our family of functions is going to be continuous, it's going to be convex for some alpha greater than alpha star and concrete below. And the limit when it converges to alpha star is just going to be a linear function of the distance. So now we are interested in understanding what are the limiting objects when we go to alpha star. Objects, when we go to alpha star. And if you go to alpha star from the right, we are going to get the authoritative matching. And now we want to understand what happens going on from the left. Does that make sense? Let's do that. So we are going to say that a transport is sign respecting if for every x the following holds. Ouch. Okay, so let's assume this. This delta is just going to be the difference between my two measures, the cumulative of my two measures at x. Okay? So then we're going to say that if delta is positive, then exactly delta x mass of mu is going to be much to the left of x is going to be much to a mass of mu to the right of x. So let me actually show you an example. Here we have our two cumulative masses. Our two cumulative masses of x, of these two things, of mu and mu. So imagine I choose this point, x. It's here. My difference, you can see it's a unit. Let's normalize it to be a unit. So what does that mean? That means that exactly one unit of this needs to be matched to the right of x. Does that make sense? It's not telling me which unit, it says what unit. But also, One unit. That also means that exactly one unit, the remaining unit that I have here, needs to be matched to the left of x. So I need to match it here. That's my only option. Again, it's not telling me which one, it's just telling me what. You can show that the transport is welfare optimal if and only if it's time respecting, and welfare optimal just means that it maximizes, sorry, minimizes the sum of the distances. And you can also see that it's not unique because I could. It's not unique because I could be matching this, but I could also be matching any other unit of these intercontinuous. Okay, so how does this gamma minus looks like? So assume that our family is continuous in alpha, then as alpha goes to alpha star from left, the optimal transport converges to the unique transport that satisfies both this time respecting property that I just show you, but also no process. But also no cross. And you can easily compute this limiting transport in order number of times our measure raw change size. So let me now show you very quickly how that looks like. So what we're going to do is we are going for each point where we change the size, we are going to look what's the internal boundaries immediately to Immediately to the right of that point and try to match as much as we can of this interval to everything that previous to that point. Okay, and we're going to go in order just to make sure that things are going to be satisfying no crossing. So that means I have a unit in this interval, I want to match it to a unit here, but because it needs to satisfy no crossing, that means that I need to match it here in the non-crossing way. Okay, so then. Okay, so then I go to the next point where this changes signs. I see I want to match this one to this one, but I cannot do it. So I just move to the next breaking point and so on. And in the meantime, I keep track in another way of what I have been unable to unwatch so far. Because you're looking at the optimal transport, should I say when you say find the no crossing uh transport you Crossing transport, you find the one that also has a new use in it. Like, for example, there are many no crossings between the first part and the second part. There's only one no crossing between the first part and the second part. I mean, I can match from the end to the okay, I see. But then that means that this will need to match with somebody else. And when you match that with cross, I'm not going to even match those. Sorry? I'm not going to even match those. You can never match the stop matching from the next to the end, right? Right, but I mean this you will eventually watch somewhere here. So then it will cross. So we are preemptively no crossing. You're right, that this will not violate no crossing immediately, but it will violate the message. As you say, if you just impose the node crossing and side respecting, then you need to. Correct. Yeah. Just if you are only no crossing, there are multiple. It does vary with the complexity. So I can repeat this, okay? I keep track of my unmatched, then I go to the next one, I cannot match, then I go to the next point. Now, okay, now I can match, that's great. So I match first the one that is closer to me, and then I have my unmatched here, so I match first. Does that make sense? And this is how my limiting object looks like. Good. So, what are some properties? So, what are some properties of these limiting objects? So, what we learned: well, even though bifurcations are there for every strictly concrete place, they may disappear in the limit. So, here we do not have a bifurcation, as you can see. We can actually say which points we or may not have quietifications in the limit by seeing how this delta x function looks like. But one important thing is that even in this limit, Even in this limit, every matching must have a biification at the first and at the last sign-changing point. So, what does that mean? Here and here, I will always have a biplication, my first and last change points. That means that every matching that is a solution of a complete optimal transport must have at least one modification. Assuming that for population standby, not we just have the math. At least one or two. Well, you can have things that you have only one changing sign. Have only one change inside, and then it would just trivially help. But if you have at least two changes inside, then you have a list. Does that make sense? Okay, so let me summarize a mental unit indication. So what this is telling us is that matching under concave or convex objectives have very different liquids. So here is our example. Assume that the cost is the distance to the alpha. This is how the assortative matching in the example will look like. Matching in the example will look like. And this, of course, it's also to the limit when it goes to alpha. And this is how it looks just to the other side of alpha stack. Okay? This is. And actually, if I take my alpha all the way to zero and I look at the limit when alpha goes to zero, this is how it will look like. So you can see for all concave functions. The middle one is the limit, right? This is the limit when it goes to alpha from the. Oh, this is zero? It is when it goes to alpha. It's not a good notation. Dang, I thought that because you were my coffer, you will not ask me questions and not even that. You're supposed to answer questions too much now. Okay, so what are the implications? So we have classifications and jumps, arise naturally and generally for matching this under conveyor objectives. Matchings under conclave objectives. And what's sort of interesting is that there's a broad class of matching settings that can be mapped into optimal drafts for three concave objectives. So of course, clearly, if you have a central planner, for example, an online platform that does have a concave objective, and here we conjecture that, for example, right-sharing, you may care about concavity in the waiting time or in the distance, but not just somebody. Not just somebody do like actually minimizing a convex object concave objective, which we know not many people do, but even if some sort of predimy matching that you're trying to do, that will also lead to optimal transfer, it can be objective. And in many non-centralized or actually many papers that take this market view of matching markets, they have shown that you can actually map this in some ways to optimal transport countries. Ways to optimize transport objectives. So, table matchings in markets with aligned preferences, decentralized dynamics in markets with preference from facility and some added frictions on so called. And I'm guessing there are other examples out there. Happy to hear if you have any thoughts. So, hopefully, based on this, you're sort of convinced that bifurcations and jumps may be a widespread phenomenon in these batching markets. Market. So, what are the implications of this? Well, the first one is obvious that the matching is not one-to-one. So, what's the problem? Well, if you think in all fairness, that may be a problem. Because if you look at somebody that is here, some of them get a great match, zero distance, and some of them get a terrible match. Okay? So, bad for bifurcations, even worse for jumps. What are the implications? What are the implications for making predictions from outcome data of having these things that are not one-to-one? So, if you play to ChatGPT with the data I told you before and tell them, okay, can you predict what's the salary of the partner of this person, it will fail very badly because it's going to try to fit a one-to-one prediction model to a label. It actually fails very badly. We tried it. And then, you know, another strong So, another strong thing is that stability assumption for analyzing match data may be strong, but conclusions may not be completely off. So, I have hidden this fact under the rug, but this is actually the stable matching that will really, how the statement matching with our example will look like. Okay, and it usually looks very similar to this limited object, and it looks very similar to everything that happens from concretely in between. Came in between. So let me show you with the example. So I told you this example was used, this data set was used in some work of agriculture marriage markets. And basically the solution concept that they assumed to make it work was stability. And you know, you may not believe that people matched in California in 2019, in although the state of California produce a stable matching. However, if we are going to However, if we are going to fit distributions to this population, so here I have the history of home salary, men salary, I fitted distributions. Here you can see how our side measure would look like. And then if I use that to try to actually optimize over the stable outcome, it will look something very similar to what we have, even though we don't believe it is actually obtained as a stable outcome. Does that make sense? So, just to conclude. So, just to conclude, what we did is we provided a framework to understand these bifurcations in matching markets in the line using optimal transport theory. We showed that matching under any concave utility leads to bifurcations. There's this sharp phase transition when you go to concavity from no bifurcations to actually at least one and most markets too. And the number of bifurcations and their sizes, if you want, will depend on how these imbalances across the populations look like. Balances and what the configurations look like. And then, hopefully, I'll convince you that matching under concrete utilities can capture a lot of problems, both in centralized and decentralized settings. And the next steps that we have is we want to better understand what are the implications of these geometric structures, qualifications and jobs. Hopefully, you know, we have identified some, but hopefully you can help us later find others. Good. That's what I have to say. That's why I come to Sam. So in the Convex case, in the Convex case, there's a closed form solution for the optimum mapping. Yes. So basically in the Concave case, are you saying that it's impossible to have a closed form solution? You just have to use these two properties. Is there an algorithm to actually find that mash tree? For the optimal solution, you mean? Yes, yes. Yes, there is an algorithm. Yes, there is an algorithm. You can do it in. There's an algorithm, but there's no closed form solution even in Pinochet. There is a closed form solution. There is a closed form solution? If I just give you a mu or mu, is there a formula that tells pinawa's a closed formula? Yes, it is. In the line, there is. In general, there's not. And in the line, there is. Oh. A formula. Wait, what do you mean by formula? A line or is a formula? No, no, no. A formula no. There's no formula. Okay. Because for convex, there is a formula. Convex, there is a formula for convex, yes. You just do a sorbat.