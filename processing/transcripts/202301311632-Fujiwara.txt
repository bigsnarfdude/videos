Institute of Technology and was a postdoc at Kyoto University, UC Santa Barbara, among other institutions. He's currently a professor at the University of Kyoto. He works on applications of concepts and methods in statistical physics, as well as ideas and tools in complex network science, including supplier-customer relations, credit and debit relationships, and creditor relationships between firms and banks. Okay, the floor is yours. Thanks. I would like to thank the organizers for this conference. Organizers for this conference to give me an opportunity to present this talk. And this is a very simple application of Hodg decomposition to money flow among France bank accounts in a regional bank. And I don't know what kind of audience here, but I suppose that the audience is a mixture of mathematicians and other applied science fields. So I would like to make. So, I like to make the story very simple. It's really a very simple application of host decomposition, but I believe that this is helpful to understand economic activities in a regional real economy. So here are the contents. I'll talk about some background and I directly go into the big data of bank remittance among firms and then I touch on. And then I touch on network structure in terms of topology, and then a simple application of host decomposition. And I'd like to interpret the results in terms of some application of non-negative matrix factorization. And I give some implications. Okay, so some background. Recent years, you can have big data of real. Of real economy in terms of production network, or in other words, supply and customer network. But the observation is yearly, quarterly at most. So there is no real-time observation so far, at least in the public domain, that is accessible to researchers. But, you know, recently, for example, COVID-19 effect to real economy is enormous. To real economy is enormous, and you want to monitor the real economy in real time, of course. And here is a very simple example which took place two years ago. So the x-axis is the time, and the y-axis is the monthly money flow in bank year-on-year change. So you can see in this particular industrial sector, like eating and drinking services in Japan. Services in Japan, you can see that there is an abrupt drop of the monthly money flow. Of course, it reflects to the downturn of the real economy in Japan because of the COVID-19. And you can see different industrial sectors and different influences, for example, eating and drinking services are much affected. Accommodations, yes. Accommodations, yes. But on the other hand, wholesale retail trade, it's not very affected. And for example, manufacturing sector, such as chemical industry, I can see a slight drop, but it is not affected to a large extent, for example. So this is an example of real-time monitoring of economy. Economy. So we'd like to take a look at bank transfer among accounts, bank accounts. And it was, so we got an opportunity to take a look at the big data of regional bank, which is a medium-sized, but the largest in a region, which is one of the prefectures in Japan. Japan, and we could see all the accounts and remittances in this study during the period from 2017 to 2019, like two years and a half. And it contains firms' accounts as well as the individual accounts. But of course, for the private reason. The private reason we exclude all individual accounts, and each firm can have multiple accounts in this particular bank. But you can observe the intra-bank remittances were selected among all the transfers related to the firm's accounts. So as a result, the number of accounts, bank accounts, is like 30,000 accounts. 30,000 accounts, and the number of remittances is about 2.4 million. And because a particular pair of bank accounts can have multiple remittances, of course, and as a result, the number of edges, so these edges are directed, but the number of edges is about 0.28 million. And the total amount of money transfer is. Amount of money transfer is something like this. It's like 20 billion US dollars, for example. So, this is this gives you the idea about the data. But of course, as I said, so there are multiple remittances between a pair of accounts. For in this case, from I to J, there were three remittances: one medium yen, two million yen, four million yen, and the backwards. Million yen and the backwards from J to I, so there is one million transfer in a particular period. So we aggregate the data during the period of two years and a half. So as a result, you can have this kind of frequency and the total amount of transfer in terms of money. And as a result, the number of nodes is 30,000. 30,000, and the number of edges is, as we said, 280,000. So this is directed and weighted in terms of frequency of remittances and also in terms of amount of remittance. Okay, so this is the actual geographical map of this prefecture, and each dot is an example. Is an example of bank accounts which is associated with a particular firm. So from firm I, from I to J, so there are remittances. And of course, it has this kind of self-loop because a bank can have multiple accounts, for example. So there is some remittances, but this is a very rare case. And as a result, And as a result, so I go to the network structure. This network is a very sparse graph. For example, the density defined by the number of edges among the possible number of nodes. So here m is the number of edges and n is the number of nodes. So this is only 0.02%. So the density is very low and the net. Is very low and the network is spurs. And so, as usual in economy, you can observe a few giants and many dwarfs. For example, in this case, on the left-hand side, x-axis is what is called the degree, which is the number of remittances or the frequency in terms of sources or destinations. Destinations or remittance and the y-axis is the cumulative probability. So, this gives you the idea what is the distribution of this, the number of remittances in terms of in and out, where in is the in terms of the source and out even in terms of the destinations. And the y-axis, the cumulative probability, which is the you know the probability. Which is the probability that X value is above this particular value. For example, 100, and you can see that 1% is a few giants. And so it has a very heavy tail distribution because this is a log plot. And on the right-hand side, you can see that the in-degree and out-degree, and there is a slight positive correlation. So possibly, quite possibly in this region, you can observe a few giants, which is probably the big firms. And I want to skip this part, but you can observe a time series of events of bank transfer and community structure. And in a word, in a nutshell, it's the number of communities which. It's the number of community, which is defined as mutually densely connected part of the graph. Is about the number of communities is about a few thousand, which is a reasonable number because the regional activity of this particular region, there are many cities and many towns, and the number is very reasonable. Very reasonable. I want to talk about an interpretation of the network structure a little bit later. So we have a directed graph, and as usual, you can examine the strongly connected components of this directed graph. So for example, if you have a graph like this, and you can extract strongly connected components of this directed graph, so the dotted circle is a kind of community. Is a kind of community. Sorry, this is a kind of strongly connected components. And you can aggregate this kind of analysis into what is called the bolt tie structure. So you can have, in this case, you have a giant strongly connected component here. So these four nodes are belonging to this giant strongly connected component. So which is connected. Uh, which is connected inward from the in component, which is probably the upstream of this graph, and the downstream part you can see the out components. And as a results of our analysis, we can find that in this regional activity, you have a giant strongly connected components, which is really big. So, this is a circulation of money. The circulation of money, and you can have incomponent and out component. And in incomponent, this is the upstream side of money flow, and out component in the downstream side of this money flow. And because the money flow among firms is a reflection of the real economy activity among the firms, so the direction of money flow is the opposite. Of money flow is the opposite of the supply and customer network of a pair of firms. So, if you're a supplier, you can get money from the customer. So, the opposite direction of the money flow is the goods flow in the production network or supply customer network. So, here the upstream is the downstream. Is the downstream in terms of the production network? So there are many customers, and here the suppliers, but there is a big core of the circulation money. So this is a very straightforward application of the voltage structure of the directed graph analysis. And as a result, as I told you, there is a big As I told you, there is a big or of the in terms of the giant strongly connected component, which, in terms of the number of nodes or in terms of the number of accounts, more than 38% of the nodes is belonging to the giant strongly connected component. And here you can see the incomponent, the upstream side, is about 15% while While the out component or the downstream side, you can see like 37 percent of the nodes are belonging to this output. And in terms of the shortest path of this directed graph, you can see that this part is not like bow tie, it's rather like a walnut structure because the shortest path has. The shortest distance from this core to the in component or the out component is very short, like the distance is something like this. And this is quite similar to our results of the entire of the nationwide scale production network. And this is quite reasonable because this is a particular region, and this is expected because this is a reflection of the Because this is a reflection of the real economy in terms of this particular region that should be reflected from the or the inherited from the nationwide scale. But it's fine, but how to identify upstream and downstream side or the circulation flow more closely? Because this analysis is based on just binary. Just a binary relationship between nodes, like the edge is present or absent. So the binary structure. So, based on that, we can analyze this strongly connected component analysis. So, we applied what we call the Helmholtz Hodge or Hodge decomposition, or maybe Helmholtz-Hodge Codaira decomposition applied to network flow. Apply to network flow because this network is not only directed but weighted in terms of the frequency of the amount of money. So, for example, with this simple example, suppose you have three nodes and three edges like this. So, this is the network of directed network or directed graph weights. And everybody knows in this audience knows how to. In this audience, know how to decompose it, but if you're a physicist, this is a kind of Helmholtz theorem. And this can be decomposed into circular flow plus gradient flow. And from this gradient flow, you can define what is called Hodge potential, or in other words, which is the location in this kind of flow. Flow. So each node has a particular position in this flow, and you can define what is called the potential. The potential is higher. This is from the upstream side, and the downstream side is like here. So this is a wrap-up or summary of mathematics. So you have a directed graph, adjacency matrix. So if there is a directed edge from node I to Is a directed edge from node I to node J. So this is adjacency matrix and flow among each edge. So we have a flow. So if there is a flow from node I to node J, this is Fij, and we defined the net flow like this. This is reasonable. And also we defined weight strength between a pair of nodes of I to J. I to J like this. If there is no mutual or reciprocal energies, so this part is not present. So this is just the flow of the original small Fij. This is just the flow. So this is the same quantity. But in this kind of analysis of bank money trans. Money transfer, you can have a pair of reciprocal edges in the data, something like this. So, suppose from I1 to node two, you have this kind of flow and the reciprocal edge is present with this amount, and then you can have something like this. And we suppose that this is a reasonable definition of flow and definition of weights, flow, net flow, and weights. And of course, you can. And weights. And of course, you can weight, you can define weight in a different way, like the average or something, but it doesn't change our result. Okay, so the Hodge decomposition is something like that. And as I told you, so this is the gradient flow, potential difference times the strength or the weight. And this is the circular flow. And the circular flow is defined as the divergence. Is defined as the divergence-free by definition. Okay. And it will end up with the simultaneous linear equations or eigenvalue problem to determine the potentials. So we have the Laplacian defined like this, and this eigenvalue problem. So we know all the Fij, the right-hand side, and we know the Laplacian. So simply determine the potential. The potential phij for the number of edges. And these, of course, the equations are not independent, corresponding to an arbitrary origin of potential. Or in other words, the eigenvalue value problem has one trivial solution. So, in our case, we take the average of all the potentials of all the nodes as zero. And zero, okay. So let us go. This is the potential flow, and this is circular flow. So, this is a very simple example. You can do mathematics, and as a result, you can define this reasonable result. So, this is the starting directed graph with these weights, and you can end up with the Hodge potential and the circular flow, and the circular flow is, of course, zero. But in this second simple example, you can have this circular flow. Have this circular flow depending on the value of A. So this is the added edges, added edge. And if A is zero, so you can end up with the previous example. But if A is present, you can have this one. Or A can be negative or in the opposite direction. So you can do the same. Directions so you can do the same exercise. So, here is the result of the bank transfer and the edge decomposition Hodge decomposition. On the left-hand side, the x-axis is the Hodge potential. And as I told you, the average is defined zero. So this is zero. And plus potential is the upstream side of the money flow. And this is the downstream side. And the y-axis is the frequency of the money. Axis is the frequency of the number of nodes. So, this is a kind of histogram. And you can see there are three peaked structures like this, because as I told you, in terms of the bow tie or wall structure, so here is the giant strongly connected component, which is the core of this real regional economy. And here is the out component. And so the hodge potential is Potential is towards the negative side, and the incomponent is something like that. And because we have a structure of the network, you can compare with the degree or the number of incoming link or the incoming edges or outgoing edges. So the y-axis on the right-hand side figure. Hand side figure. So I define the net net degree, which is defined by the incoming number of edges and outgoing edges. So suppose you are a firm and you want money because you are a supplier. And then this net degree is positive. So in that sense, this is a kind of supplier. And if it is negative, And if it is negative, so this is you are a customer, you are likely a customer in the sense of this net degree. So the x-axis is the hodge potential, which was calculated from the previous slide, and the y-axis is the network structure and supplier and customer, or in other words, supply of money and demand of money. And you can have this. Can have this correlation or the structure. And this tells you about each node or each bank account can be located by using this hodgepotential, which is very nice because not only the network structure, but depending on the frequency of the amount of money flow, you can define what is. What is the location of individual bank account, or in other words, a farm? So, this tells you about the regional economy structure in more details. Okay, so this is the summary of the previous slide, and I want to touch on very briefly how to interpret this kind of analysis and. And so far, we have been looking at the individual money flow between bank accounts. But of course, each bank account is located in some geographical place. So for example, in this particular region M, you have a number of bank accounts in this region. And in another location, you can have a number of bank accounts, possibly different. Possibly different forms. So we supposed that maybe we can look at geographical locations and what is the money flow between different geographical locations. Okay. So in other words, how money flows from one particular geographical region to another. So we convert the previous remittances based on geographical locations, source, and destination. Of source and destination of money flow into a big matrix from region M to region N. So, this is a big matrix. So, as you know, and of course, this is also a spurse matrix because it is quite likely that there is no remittance between countryside to countryside. So, a very big but very sparse matrix. So, you can decompose into like a pre- Into like a principal component analysis. So, in this case, we use the non-negative matrix factorization, and you can find what is the typical structure. So, as a result, you can observe that there are like 10 different components, so which each of which is corresponding to regional activity, like so, for example. Like, uh, so for example, in this city, you can have a very strong kind of principal component that the money is coming from this region and ending up with this particular with the same region or something like that. And of course, there is a big city here which is near Kyoto, and the biggest city is this particular. This particular city, and you can have from this source, you can have money flow into different geographical locations. And you can compare with the result of hog decomposition with this kind of analysis. But I want to end up with some implications. So, our starting point was: okay, so the bank accounts and banks. Okay, so the bank accounts and bank transfer is a very good data to understand the regional economy in real time. So it's very ideal for studies on the regional real economy because it makes the real-time monitoring possible. And possible applications, of course, for example, COVID-19 economic stress and effect. So you can monitor this. So what is the influence of this? Of this nationwide or worldwide shock, because, as I told you in the very first slide, that it influences quite differently to different industrial sector, to different geographical locations. So, we can understand this kind of stuff in a very reasonable and really One really easy way. And another application is firms default bankruptcies are taking place and what are the influence? Because you have the data of the network and you can make a model of the chained bankruptcy or something like that and illegal outly activities and money flow, etc. So to conclude, so we first studied with the big data of money flow in the banks, accounts, or firms. Flow in a bank's accounts of firms. It's a bank remittance data. And our motivation was the real-time observation of real economy. And first, our purpose was to study the long-term and main structure. So we took two years and a half as a starting point in order to understand the basic structure of the network. And we first took the analysis of strongly connected. The analysis of strongly connected components. And in terms of the border structure, we were able to identify the core upstream and downstream side of the economy. And we applied Hodge decomposition in order to find each firm's location in the money flow, which was found to be quite correlated with the supply and demand of money, which is a reasonable result that we had a bonus to get the information. We had a bonus to get the information of each firm's location and the money flow. So you can say that this firm is located in this part and which can be affected by this economic shock, etc. And as a result, we applied a non-negative matrix factorization in order to find principal components which were found to reflect geographical features extracted. So I think I sent this slide to the uploaded slide to the website of this conference. And if you have interest, you can take a look at this paper and these other collaborations of mine. And thank you so much, all the people there. Okay, thank you very much. So, questions? Okay, so let's so you showed an example where the Hodge potential is useful, right, in terms of placing firms within a particular range. I mean, the Hodge decomposition also provides components left over that's not described by differences in potential. Is that something that you can exclude? Is that something that you can exploit to explain relations in this giant connecting component? I'm sorry, I cannot hear you very clearly. Can you use information from the Hodge decomposition outside of the Hodge potential? Like the circular flow or something. Right, like does a circular flow help you understand the giant connected component? Uh-huh. So this. Uh, so this uh giant um strongly connected has uh you know our circles, circular flows reflecting different community structures or densely connected components of the network. So, uh, you know, in this region is divided into or you know, loosely divided into very local activity of real economy. Local activity of real economy. And you have circulation money into those individual small part of the real economy. So except the hodge potential itself, you can have information from the circular flow. So this is another application of this hospital decomposition. But one But one thing which has been a kind of headache in our study is circular flow is in this kind of analysis is present even if there is no directed edge. I should use blackboard to explain this, but suppose there is a direct Suppose there is a directed edge from I to J, but circular flow tells you that there must be an opposite flow from J to I, for example. But it is not difficult, it is not easy to interpret this result of the circular flow because I to J is reasonable. So I suppose I is supply and J is a big firm, so there is a money flow. Firm, so there is a money flow. But if this kind of mathematical analysis tells you in terms of circular flow, that there should be flow from J to I, from big firm to a supplier. So it's not easy to interpret this. But so this is one headache or the one thing which we want to maybe discuss with someone in mathematics. But anyway, so But anyway, so this kind of circular flow is very helpful to understand real economy. I'm not sure, pretty sure that I'm answering your question, but. Yes, you did. And I think the question you raised about and the directed edges from the graph is something been talking about this week, and it certainly is something we'll continue to discuss. So thank you for raising that in a critical setting. Are there any other questions? Okay. So much and let's keep it