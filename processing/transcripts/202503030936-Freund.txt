Having us all here, this is my first time in Bank. I'm incredibly excited to have the opportunity to present. This is joint work with my PhD student, Benjamin Barrientos, at MIT, and with Daniela Saban, who is sitting in the back. She didn't allow me to put the picture on, but she's here for all of the hard questions. So the title of the talk is Online Matching AND Imbalanced Markets. I put and in italics because it could be a talk that just talks. Talk that just talks about online matching in imbalanced markets. And that is what I will talk about a good amount. Where I will try to convince you that traditionally when we think about online matching, we think about settings where we get some sort of a competitive ratio guarantee. And that competitive ratio guarantee occurs in a balanced setting. What balanced setting means, I will try to make clear. means I will try to make clear it will become clear during the talk that what I will try to show you is that in an imbalanced setting we actually expect to see better results and in fact we can prove stronger competit equations and then I will try to loop back in the other direction by coming up with a bit of an analysis that shows you that if you believe that the platform, whoever is doing the matching, Is doing the matching has some impact on the supply and demand that arises on the platform. And if you believe that imbalance leads to better online matching performance, then you should expect that the markets that you observe in practice are actually imbalanced. So that is really the motivation for this talk. Now, what is the exact agenda? I will first try to define what I mean by imbalance. Try to define what I mean by imbalance, and I will spend way too much time on that. I will then show you the parametrized performance guarantees of online algorithms or of a class of online algorithms that occur, that are parameterized by the amount of imbalance in our markets. I will show you some numerical results. I will show you some numerical results on data. Results on data from a real-world matching platform. And in the end, I will try to loop back by showing you some sort of a stylized news vendor analysis of the supply in a matching platform that will hopefully convince you that there's theoretical reason to believe that we should expect matching instances to be imbalanced. And therefore, it makes sense to look at the competitive ratios of matching algorithms. Of matching algorithms in imbalance models. Okay, let's jump into the measure of imbalance. Actually, before I do that, Daniela told me I really have to define what online matching means. I feel like Tristan sort of did it already, but it will be a little bit different. We will look at online matching with stochastic rewards. We still have supply offline. It is still illustrated by cars. In every period, 1 through T, a demand note arrives that this person. Mad note arrives, that's this person over here right now in period one. The decision maker observes the incident edges, irrevocably assigns to an adjacent supply node. With some probability, the supply node is consumed or not, and then the next node arrives, and so forth. Our goal is to maximize the expected number of supply nodes that are consumed. And I will highlight, we can assign multiple demands. Highlight: We can assign multiple demand nodes to the same supply node in this setting, but each supply node can only be consumed once. So, notice the stochastic reward means if some rider gets matched to a driver, the driver does not serve that ride, the driver is still available for the next demand to be matched. Okay, now let's get to the definition of imbalance. And I want to emphasize that I view the imbalance definition very much. Viewed the imbalance definition very much as somewhat agnostic to the exact matching formulation. In particular, it will be an offline definition of imbalance. So let's consider this setting here. We have two passengers over here. We have five drivers over here. Our probability of consumption is equal to one, so I've taken the stochastic rewards out of it. Of it. Does anybody want to warrant a guess of how imbalanced we are? Six-fifths. Six-fifths. So I'm going to claim that it's natural to think of us as being two times 2.5 over supplied. Because we have five drivers, they could serve each of They could serve each of our demand 2.5 times, but we only have two demand. So we are 2.5 times oversupply. Different way to think of it is if we were to reduce the capacity of our drivers, it's a bit of a weird thing to say because these are unit capacity supply, but if you imagine them having their capacity reduced by a factor of 2.5, you could still match all of the demand. You could still match all of the demand. So you mean imbalance horizontally, not vertically? Yes. Thank you. You'll have to explain to me offline how you got to 600. Okay, so that's one example. Let me go through a few more, Alejandro, yeah. But just ignoring any compatibility, which is kind of total? No. So, for example, in this setting here, how oversupplied are we? Yash says two, and exactly, it is the case. Exactly. It is the case that over here we are more oversupplied than two, but I'm going to call this two oversupplied because if I was to reduce all of my driver capacities by a factor one half, I would still be able to serve everybody. If I was reducing it by more, I would no longer be able to serve everybody. Similarly, you can imagine the other direction over here. I have four passengers. I have four passengers, I have three drivers. If I reduced each of the demands by a factor of three-quarters, then I would still be able to serve the same amount of people. If I was reducing it by more than a factor, like if I was reducing, for example, down to one half, that would no longer be the case. Similarly, of course, if I was increasing the capacity of the drawing, Of increasing the capacity of the drivers by a factor of four-thirds, then I would be able to solve that problem. Does it have connections with graphic compositions and looking at the mature? For now, it does not, but yes, at some point I'm gonna cite your paper with heating. Like, you look at the largest composition, the one that has more. In Appendix F, we do, but for this talk, we do not. But happy to talk about it. Talk, we do not, but happy to talk about it a lot. So, notice if I reduce over here, if I go from mu being equal to one to saying what if my mu is equal to three quarters, now each of the demand nodes only consumes supply with probability three-quarters. So, my demand over here really needs to be normalized down by three-quarters. And at that point, I'm going to call the incidence. And at that point, I'm going to call the incidence balanced. Intuitively, is it clear what we mean by imbalance now? Okay. So in that case, let me try to actually define it. And I will define it by using a deterministic linear program that has the following flavor. It is parameterized by this kappa, and kappa eventually will measure how imbalanced we are. How unbalanced we are. Now, the deterministic linear program is really a matching LP where I'm trying to maximize the expected amount of demand matched or the expected amount of supply consumed, subject to every demand node I can match at most once. So that is very standard. But then in addition, every supply node. Every supply node has capacity at most kappa. So the real problem or the standard problem, the input really is the one where kappa would be equal to one. That is what we should be thinking of. But what if I change kappa over here? If I increase kappa, then each of my supply nodes has greater capacity than it did before. If I decrease kappa, if I choose the kappa, Decreased kappa, if I choose a kappa that is less than one, they have lower capacity. How does that map back to over or undersupplied instances? If I'm oversupplied and I choose my kappa here to be less than one, then my objective should not decrease because I was oversupplied. So if I reduce my capacities, at least for a little bit, I should be able I should be able to serve more demand. And the way we can formalize this is we will call an instance oversupplied by kappa. If kappa is sort of the smallest number you can put over here, while maintaining the same objective that you would have had at kappa equal to 1. And we will call an instance kappa undersupplied. If kappa is the largest number that you can put over here, such Can put over here such that you get kappa times the objective that you would have gotten if you had just set kappa equal to 2. So this captures all of the pictures that we had before. There's something it doesn't capture, and that's what Rad alluded to, which is how about the CR. So this instance is sort of mixed. If you look at it, If you look at it, it feels imbalanced, and in fact, it is. So, over here, we are undersupplied. We have two people that want to use this one car. Down here, we are oversupplied. We have two cars that want to serve this one person. So, it makes sense to view this as too imbalanced, but it's neither over nor undersupplied. We can generalize our definition to that. We do that in an appendix. To that. We do that in an appendix. I'm happy to talk about it offline. We will not focus on that in this talk. But with one additional assumption, our results then also extend to this sort of more general definition of imbalance that captures graphs that have some parts that are oversupplied and some parts that are under supplied. Yeah. What are the definition you're going to use in this talk? Is this going to be undersupplied or oversupplied? For the purposes of this talk, this is unfortunately considered balanced. I see. So, your definition still, it is like over and undersupplied are mutually exclusive and inclusive plans. Yes. And yes, the way to think about it exactly is in this setting, we do not give a better competitive ratio than you would otherwise. Competitive ratio than you would otherwise. But what we will want to do is, in fact, you want to have as broad a definition as possible, such that you are able to say on a broad class of graphs, I get better competitive ratios thanks to imbalance. So when I say unfortunately, we view this as balanced for the purposes of this talk, what I really mean is I would like to say that this is true imbalance. I don't want to get into the details of this, therefore, I'm skipping it. Yeah, I think the clearest notion of imbalance you can use probably is just for hypermatchable graphs, right? Like if you have a hypermatchable bipartite graph, then it is alpha imbalance. The ratio of the left side to right side and temperature size is alpha. Yes. And our visual graph is going to decompose it into imbalance. Okay. So in Europe, this In Europe, we give k equals 1. That's what you meant there? Yes, yes. So if you look at this definition, you cannot, if you decrease kappa in this graph, then your objective goes down because you lose your ability to match these people. If you increase kappa, your objective does not go up proportionally because Because these here do not contribute more in our objective. So by that definition, it is neither oversupplied nor undersupplied. Okay. Yes. Your definition is somehow not symmetric in both sides. I know you call one of them supply other one demand, but if I just look at the graph, it's metric. So if I made your definition symmetric, which means in the second case you have that linear scaling kappa. You have that linear scaling kappa. If I did not have that part, and if I defined it exactly like the other one, then this would be undersupplied. I don't think so. So notice the fact that if you swapped all the cars to the right and all the people to the left, the graph would not actually change. So we are hiding, or maybe we're not hiding, but if you look at this different. But if you look at this definition, instead of changing kappa, instead of putting kappa over here, you could put one over kappa over here. It is actually symmetric. We just want to have one consistent way of writing it on both sides. The move character and then do a change of values. I thought, if I want to define instead of undersupplied, if I want to call it like over demand. Call it like over demand. Demand is excess. And then use the definition for over demand to look like your topic. Then you could similarly just normalize your muse. And that would give you the center. So I guess your balance case is not on a nine-fifth. It's like if I take pretty diverse graphs, all of them will be balanced. Let me talk a little bit more about that in aesthetic in the second. Half graph, but in particular, suppose you have a very imbalanced graph. This is what is sort of the real thing that is missing in this definition. Imagine you have a very unbalanced graph. And then you have, and your mu is equal to one. And then you have somewhere a single demand node with an edge to a single supply node. The definition we give here would be that it's balanced. Would be that it's balanced. Now, really, if you think about competitive ratios, you should go through the exercise of weighing on each connected component the competitive ratio that you get. And if you get a better competitive ratio on the large part that is very imbalanced, and then on this one here, even though there's only one matching decision you could do, let's give us a one-half to penalize us for the fact that we are balanced. We are balanced or one minus one over eight, you would still do better. I think I'm good. I mean, if they're disconnected, it's fine. But if they're connected, you'll get natural problems. Again, yes. But we can, the graph decomposition would allow us to do better. Okay. So, what can we do in these imbalanced graphs? We will look at a class of algorithms that we will call delayed algorithms, meaning they Delayed algorithms, meaning they do not adapt to the realization of the stochastic realization of whether or not a demand node realizes or not. And we look at the achievable competitive ratio of these delayed algorithms. And we will compare or we will measure our competitive ratio as the ratio between the expected performance of the algorithm. The expected performance of the algorithm and the DLP of one, meaning the deterministic LP, the LP relaxation of our online instance in which the capacity of each supply node is one, which is what it really is in reality. I want to mention there are stronger benchmarks that have been explored in recent years, including by people in the room, or at least one person in the room. And the reason we The reason we don't want to look at those is because it, as you will see in a second, it makes very natural sense, given that we defined imbalance through the DLP, to also have as a benchmark the DLP. So what are the types of results we can get? Can I ask a quick question? So do you make any assumptions on you? Maybe it is in your next segment. On what assumptions? On mute the programme. Yes. For under-adversarian arrivals. Under adversarial arrivals, if our mu tj's are either zero or of the same value, then we can show that a greedy algorithm obtains a comparative ratio of kappa divided by kappa plus one in instances that are either one over kappa oversupplied or kappa undersupplied. See, Vatica, that is the symmetry that I think you were looking for. And we show that no delayed algorithm can obtain a higher competitive ratio. Higher competitive ratio. Under stochastic arrivals with known distribution, we can show that there exists a delayed algorithm that in a kappa oversupplied instance obtains a competitive ratio of 1 minus e to the minus kappa divided by kappa and on undersupplied instances 1 minus e to the minus kappa. One contrast in those numbers that is very apparent is that this here Is that this here gives you in kappa an exponential rate of convergence, whereas all of the other numbers that I showed you really give you a linear rate of convergence. So the way I would think about this is we get these parametrized performance guarantees where most of the literature really tries to push upwards. Push upwards on the kappa equal to one line, which of course also applies everywhere else. But in imbalanced instances, we show that better ratios are achievable. And then the second part that I want to mention is the exponential rate of convergence sort of shows up over here. So where kappa is greater than one, over here where kappa is less than one, the Than one, the adversarial performance guarantees and the stochastic arrival performance guarantees they look sort of similar, I would say. Over here is where you get a really large gap. Okay, I will tell you very, very little about the proof sketch. Maybe just for the adversarial arrivals, it's a slab-based proof, Alameta, Saberi, Bazirani, Bazirani, where we define. Running, where we define a factor-revealing linear program and then construct a dual solution. The factor-revealing linear program compares the performance of 3D with supply capacities being equal to one to the DLP with capacities scaled up by kappa. We then show that for a given T, the number of people that arrive, Number of people that arrive, the number of demand nodes, online notes that arrive, mu, the probability that they realize, and kappa, the imbalance. This dual ends up being bounded below by 1 over kappa plus 1. This is the hard part showing this, but I'm not going to talk much about it. What I just want to convince you of is once you've shown that, it is very easy to show the result that we want to show. Show the result that we want to show. We're interested in bounding greedy divided by DLP of 1. We're kappa undersupplied. So if we go from dlp of 1 to dlp of kappa, we get to multiply up here by kappa. That is just the definition of kappa undersupplied. And then we can just use the bound that we have, and we get the inequality greater than equal to kappa over kappa plus 1. Kappa over Kappa Passam. Yeah. Any reason that you didn't analyze the primordial balance algorithm? No, not really. Within the delayed algorithms that we're looking at, it doesn't make like this is the best you can do. But yes, one could look at other classes of algorithms, other restrictions, also other types of matching models, like Tristan mentioned several, where you could similarly look at imbalance and probably get better guarantees. At imbalance and probably get better guarantees. But yeah, I was thinking about the ad resale version and maybe the fractional version and then trying to just have optimal property now with K-code properties. Yes. I think you get improvement. You should be able to interpolate between one minus one array and one in the same way that you interpolate between half and one like ray. Let's talk about it open. And for kappa oversupplied, For Kappa oversupplied, you do roughly the same thing. I'm going to skip the stochastic arrivals, but it has a similar flavor of we are adapting an existing proof, and then we leverage the definition of over and undersupport. I want to show you some numericals that I think are interested in the five-ish minutes that I've left. So, over here, I'm showing you the competitive. I'm showing you the competitive ratio on sort of a bad instance, but we're not taking, in order to get our bad instance, we need to take something to infinity. We don't really take it to infinity here. The orange line is our greedy algorithm. The green line is the lower bound. The algorithm by Dinique Goyal and Rajan is in blue. And that is not a delayed algorithm. not a delayed algorithm. So what we show is that no non-delayed algorithm can asymptotically be better as sorry, no delayed algorithm can asymptotically be better than the green line. That result does not apply to this blue line over here. But nonetheless, it's very clear that our imbalance definition, or at least numerically in this picture it's very clear, similarly applies to that algorithm as well in the sense of That algorithm as well, in the sense of more imbalance gives better matching performance in a clear parameterized script. We have some data from a matching platform, and on that data, what we looked at is, well, for each instance that they have, we can measure how imbalanced are they, and we can measure what is the competitive ratio. And these are the And these are not really constructed instances, these are just the instances that they observe in reality. And what I want to emphasize is that, again, you can see over here, I mean, you can see plenty of things up here, and that's just the nature of the real world, is not worst-case instances. But you can also see this idea of more balance yielding better matching performance across the board. Now, Now, I want to look back from online matching to imbalanced markets by showing you a little intuition and/or analysis for how to think about how better competitive ratios in imbalanced settings could lead platforms to actually try to create imbalanced settings. So, here's a motivating example: mu is equal to one quarter. Mu is equal to one quarter. We have three drivers, four passengers. If you do the math, you find we are four times oversupplied. Really, we would like to have just one third of each of these drivers. And that might lead somebody to think: hey, we could save a lot on our supply costs if we reduced our supply. We would still be able to. We would still be able to serve the same amount of demand. But what we would argue is that doing so, the algorithm's revenue may actually drop. And that the reason for that would be that the competitive ratio with as many drivers as there are is actually a better competitive ratio than what you would get once you get to a more balanced. You get to a more balanced setting. Okay, so how can we formalize that? We're going to make five assumptions. One is that DLP of one perfectly matches all the supply and demand. Meaning DLP of one is really supposed to be a truly balanced instance. If you acquire more or less supply, you get an over or under-supplied instance proportionally. Under-supplied instance proportionally and the competitive ratios, we want them to hold with equality so that we're actually able to do an analysis. And then we will sort of in a standard news vendor view of the world assume that supply is a unit cost. Each successful match generates a revenue of R. And those are the assumptions that we want to make. And we want to ask how much supply Ask how much supply in this setting should a platform acquire relative to being perfectly balanced. I want to emphasize: it's not that we believe that these assumptions hold in the real world, it's just that making these assumptions allows us to leverage the competitive ratios into asking the question of how much imbalance should a platform aspire to. So, here's how Here's how much supply a platform should be acquiring relative to being perfectly balanced. The blue line is the adversarial one. One thing you can see is that the exponential rate for the stochastic setting leads us to very quickly want to have at least some supply. So, in a setting over here, which you should really think of as there. Over here, which you should really think of as there being small margins, the cost is almost as large as the revenue of supply. Under stochastic arrivals, you would want to have supply or meaningful amounts of supply much sooner than under adversarial ones. Over here, where your margin is very large, you find that under adversarial arrivals you need more inventory or more supply than under stochastic arrivals because you really want to match. Arrivals because you really want to match everybody, and the adversarial is worse at that than the stochastic, naturally. But I also want to emphasize that if we just assumed a constant competitive ratio, whether that's a competitive ratio of one half or one minus one over E or whatever it may be, you would really get a plot that remains constant at zero, then goes up to one, and then remains constant there. So, with respect to the question of market entry, when do you? Of market entry, when do you even want to be doing this business? It makes a big difference if you incorporate the parameterized competitive vision. So, to wrap up, given that I just got dinked by the bell, we're looking at, in reality, we often look at, sorry, in the literature, we often look at worst case instances for online matching, stochastic rewards or not. Stochastic rewards or not, that are balanced. And that's not a coincidence because, in imbalanced instances, what our work shows is that higher competitive ratios are achievable. We parameterize these competitive ratios by our definition of imbalance, both for undersupplied and for oversupplied regimes. And we show that both on data, real instances are imbalanced, and that imbalance. And that imbalance indeed yields higher competitive ratios. But then we also show that such imbalance may be desirable in the sense of if it is truly the case that imbalance gives you a better competitive ratio, it may be in your interest to have some amount of imbalance, even though that means some of your supply may never be matched or some of your demand may never be served. It allows you to still serve more overall as you leverage the imbalance. Overall, as we leverage the imbalance into better matching points. I'll stop here. Thank you very much. Maybe in the interest of time, given we're a little over, I guess feel free to ask Daniel at the coffee break. Let's do a coffee break for now and then we'll resume the question. 